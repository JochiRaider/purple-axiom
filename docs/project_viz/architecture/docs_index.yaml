# file: docs/project_viz/architecture/docs_index.yaml
version: 1
documents:
  - id: spec_000_charter
    filename: 000_charter.md
    title: 'Project charter: continuous purple-team range'
    purpose: Defines Purple Axiom's mission, MVP outcomes, and core principles (determinism, contract-driven stages, safety-by-default) that all other specs build on.
    key_sections:
      - heading: Summary
        summary: Project mission and what “done” looks like for v0.1.
      - heading: Principles
        summary: Determinism, contract-driven execution, and stage-scoped responsibilities.
      - heading: Safety-by-default operation
        summary: Default-safe behavior expectations (e.g., network intent signaling, redaction posture).
    important_terms:
      - term: Purple Axiom
        note: System name used across the corpus.
      - term: run bundle
        note: Primary artifact boundary for pipeline outputs.
      - term: stage identifiers
        note: Stable stage IDs (v0.1+) referenced in multiple specs.
      - term: action_key
        note: Deterministic action identity referenced by other specs.
      - term: scenario.safety.allow_network
        note: Scenario-level network intent signal.
    evidence:
      - file: 000_charter.md
        section_heading: Summary
        excerpt: Purple Axiom is a local-first cyber range that runs safe adversary-emulation scenarios, captures
  - id: spec_010_scope
    filename: 010_scope.md
    title: Scope and non-goals
    purpose: Declares the v0.1 scope boundaries (in-scope vs out-of-scope) and references the stable stage-based pipeline framing used throughout the system.
    key_sections:
      - heading: Overview
        summary: What the project covers at a high level for v0.1.
      - heading: In scope for v0.1
        summary: Explicit v0.1 deliverables and supported behaviors.
      - heading: Explicit non-goals for v0.1
        summary: Excluded features reserved for later versions.
    important_terms:
      - term: v0.1
        note: Baseline scope version referenced by CI/readiness docs.
      - term: stages
        note: Stage-based pipeline framing for orchestration.
      - term: determinism
        note: Cross-cutting requirement reiterated across specs.
      - term: contracts
        note: Artifact contracts used to validate and gate publishes.
      - term: local-first
        note: Operating principle for artifacts and workflows.
    evidence:
      - file: 010_scope.md
        section_heading: Overview
        excerpt: Purple Axiom v0.1 focuses on deterministic, local-first execution with a fixed stage pipeline and
  - id: spec_015_lab_providers
    filename: 015_lab_providers.md
    title: Lab providers and inventory resolution
    purpose: Defines the pluggable lab provider interface and deterministic inventory snapshotting, producing a canonical lab.assets shape used across stages.
    key_sections:
      - heading: Purpose
        summary: Provider abstraction to avoid coupling to one provisioning system.
      - heading: Key concepts
        summary: Lab provider, inventory snapshot, and canonical asset shape.
      - heading: Publish and validation gate
        summary: Staging/publish semantics and contract validation requirements for the stage.
    important_terms:
      - term: lab provider
        note: Component that resolves assets from an external inventory source.
      - term: lab.assets
        note: Canonical resolved asset list used by downstream stages.
      - term: inventory snapshot
        note: Run-scoped snapshot for reproducibility.
      - term: asset_id
        note: Stable logical asset identifier within Purple Axiom.
      - term: provider_asset_ref
        note: Optional reference back to the provider's native identity.
    evidence:
      - file: 015_lab_providers.md
        section_heading: Purpose
        excerpt: Define a pluggable interface for resolving lab assets without coupling Purple Axiom to any single
  - id: spec_020_architecture
    filename: 020_architecture.md
    title: Architecture
    purpose: Defines the high-level system flow, stage identifiers, IO boundaries, and extension points, including normative workspace and run-bundle layouts.
    key_sections:
      - heading: Scope
        summary: What the architecture spec covers (and does not cover).
      - heading: Run bundle layout
        summary: Run-bundle IO boundaries and run-relative artifact organization.
      - heading: Workspace layout (v0.1+ normative)
        summary: Reserved workspace directories and how artifacts are organized.
    important_terms:
      - term: workspace_root
        note: Filesystem boundary for durable artifacts.
      - term: runs/<run_id>/
        note: Canonical per-run bundle root.
      - term: publish gate
        note: Staging then atomic publish into final paths.
      - term: adapter registry
        note: Mediates adapter selection rather than ad-hoc imports.
      - term: ports and adapters
        note: Extension mechanism for stage implementations.
    evidence:
      - file: 020_architecture.md
        section_heading: Scope
        excerpt: 'This document covers:'
  - id: spec_025_data_contracts
    filename: 025_data_contracts.md
    title: Data contracts
    purpose: Defines contract-backed run-bundle artifacts, validation rules, canonicalization/hashing requirements, and reader semantics for reproducible consumption.
    key_sections:
      - heading: Terminology
        summary: Defines core artifact and validation terms (run bundle, contract, etc.).
      - heading: Run bundle layout
        summary: Contract-backed artifact paths and reader expectations for run bundles.
      - heading: Cross-artifact invariants
        summary: Invariants enforced in code/CI beyond JSON Schema expressiveness.
    important_terms:
      - term: contract registry
        note: Source of schemas used for validation.
      - term: canonical_json_bytes
        note: Canonical JSON serialization basis for hashing/diffs.
      - term: sha256:<lowercase_hex>
        note: Digest string format used throughout.
      - term: bridge/router_table.json
        note: Snapshot artifact for Sigma routing behavior.
      - term: bridge/mapping_pack_snapshot.json
        note: Snapshot artifact for bridge inputs and provenance.
    evidence:
      - file: 025_data_contracts.md
        section_heading: Terminology
        excerpt: '- Contract: A schema plus invariants for one artifact type.'
  - id: spec_030_scenarios
    filename: 030_scenarios.md
    title: Scenario model
    purpose: Referenced as the authority for scenario model inputs and deterministic action identity (action_id/action_key) used by runner and other stages.
    key_sections:
      - heading: Overview
        summary: Scenario model intent, inputs, and boundaries.
      - heading: Execution model (runner requirements)
        summary: Runner obligations for action lifecycle, recording, and reconciliation.
      - heading: Stable action identity (join keys)
        summary: Deterministic action identity (action_id/action_key) used as join keys across datasets.
    important_terms:
      - term: inputs/scenario.yaml
        note: Scenario-specific configuration input referenced by config precedence.
      - term: scenario_id
        note: Stable scenario identifier pinned for comparability.
      - term: scenario_version
        note: SemVer versioning domain for scenarios.
      - term: action_id
        note: Ground-truth action instance identifier (used as join key in datasets).
      - term: action_key
        note: Deterministic action key referenced across specs.
    evidence:
      - file: 030_scenarios.md
        section_heading: Overview
        excerpt: Scenarios specify what to run, how to parameterize it, and which targets should be selected. The
  - id: spec_031_plan_execution_model
    filename: 031_plan_execution_model.md
    title: Plan execution model
    purpose: Defines the plan model used to execute stage work, including steps, target cardinality, and deterministic execution semantics.
    key_sections:
      - heading: Purpose
        summary: Plan model goals and integration points for stage execution.
      - heading: Concepts and terminology
        summary: Plan/step concepts, identifiers, and execution semantics vocabulary.
      - heading: v0.1 behavior (normative)
        summary: Deterministic plan execution semantics required for v0.1.
    important_terms:
      - term: plan
        note: Executable unit describing stage work.
      - term: step
        note: Atomic plan node within execution.
      - term: target cardinality
        note: How many targets a step addresses.
      - term: plan graph
        note: Step dependency structure.
      - term: execution semantics
        note: Deterministic ordering and handling expectations.
    evidence:
      - file: 031_plan_execution_model.md
        section_heading: Purpose
        excerpt: 'Define:'
  - id: spec_032_atomic_red_team_executor_integration
    filename: 032_atomic_red_team_executor_integration.md
    title: Atomic Red Team executor integration contract
    purpose: Specifies runner integration expectations for Atomic Red Team, including cleanup invocation/verification and deterministic reconciliation outputs.
    key_sections:
      - heading: Overview
        summary: Integration scope for Atomic Red Team execution within the runner.
      - heading: Contracted runner artifacts (normative)
        summary: Runner-produced artifacts and minimum required outputs.
      - heading: Cleanup invocation and verification
        summary: How cleanup is invoked and evidenced (including verification checks).
    important_terms:
      - term: Atomic Red Team
        note: External executor referenced by integration spec.
      - term: cleanup_verification
        note: Evidence of cleanup checks.
      - term: state reconciliation
        note: Residue detection and reporting.
      - term: runner.state_reconciliation
        note: Outcome name referenced in safety guidance.
      - term: reason_code
        note: Deterministic classification for integration failures.
    evidence:
      - file: 032_atomic_red_team_executor_integration.md
        section_heading: Overview
        excerpt: This spec defines how the runner discovers and parses Atomic YAML, resolves inputs, canonicalizes
  - id: spec_035_validation_criteria
    filename: 035_validation_criteria.md
    title: Validation criteria packs
    purpose: Defines criteria packs used to validate expected signals per action/technique and to drive scoring and gap attribution when enabled.
    key_sections:
      - heading: Overview
        summary: What criteria packs are and how they are used.
      - heading: Run bundle snapshot
        summary: Snapshot artifacts, schema validation, and hashing expectations for pinned criteria.
      - heading: Evaluation outputs
        summary: How evaluation results are written, ordered, and referenced as evidence.
    important_terms:
      - term: criteria pack
        note: Pack-like artifact selected/pinned for a run.
      - term: criteria/manifest.json
        note: Contract-backed manifest for criteria pack snapshot.
      - term: criteria/results.jsonl
        note: Line-delimited results of criteria evaluation.
      - term: criteria_unavailable
        note: Gap category when no matching criteria entry exists.
      - term: criteria_misconfigured
        note: Gap category when entry exists but cannot evaluate.
    evidence:
      - file: 035_validation_criteria.md
        section_heading: Overview
        excerpt: Criteria packs define expected signals for executed actions, are versioned independently, and are
  - id: spec_040_telemetry_pipeline
    filename: 040_telemetry_pipeline.md
    title: Telemetry pipeline
    purpose: Defines the telemetry pipeline ETL spine, including OTel collector roles, raw/validated stores, and reproducible checkpointing for telemetry ingestion.
    key_sections:
      - heading: Overview
        summary: Telemetry pipeline responsibilities and boundaries.
      - heading: Canonical topology
        summary: Collector roles and dataflow across raw/derived/validated stores.
      - heading: Checkpointing and replay semantics (required)
        summary: Deterministic checkpoint artifacts and restart/replay semantics.
    important_terms:
      - term: OpenTelemetry Collector
        note: Telemetry collector component referenced by the pipeline.
      - term: raw_parquet/
        note: Raw parquet store path used for telemetry storage.
      - term: logs/telemetry_validation.json
        note: Telemetry validation output artifact.
      - term: logs/health.json
        note: Health signal artifact (referenced in scoring evidence rules).
      - term: unix log ingestion
        note: Referenced integration spec for unix sources.
    evidence:
      - file: 040_telemetry_pipeline.md
        section_heading: Overview
        excerpt: The telemetry pipeline standardizes collection through OpenTelemetry, preserves raw Windows Event
  - id: spec_042_osquery_integration
    filename: 042_osquery_integration.md
    title: osquery integration (telemetry and normalization)
    purpose: Defines how osquery scheduled query results are ingested and normalized, including identity basis and routing expectations.
    key_sections:
      - heading: Overview
        summary: Integration scope for osquery artifacts.
      - heading: OpenTelemetry Collector ingestion
        summary: Collector ingestion model and required receiver/exporter behaviors.
      - heading: Normalization to OCSF
        summary: Routing and normalization expectations for scheduled query results.
    important_terms:
      - term: osquery
        note: Telemetry source integrated into the pipeline.
      - term: scheduled query results
        note: Primary osquery output form for ingestion.
      - term: identity basis
        note: Identity strategy referenced by ADR-0002.
      - term: routing
        note: How osquery data is directed into classes/streams.
      - term: normalization
        note: Integration point to OCSF normalization.
    evidence:
      - file: 042_osquery_integration.md
        section_heading: Overview
        excerpt: osquery results are ingested from the filesystem logger, staged as raw evidence, optionally
  - id: spec_044_unix_log_ingestion
    filename: 044_unix_log_ingestion.md
    title: Unix log ingestion (telemetry and normalization)
    purpose: Referenced as the authority for unix log ingestion declarations, duplication avoidance, and provenance recording for syslog/journald sources.
    key_sections:
      - heading: Overview
        summary: Unix syslog/journald/audit ingestion model and run-bundle staging.
      - heading: Duplication avoidance (required)
        summary: Overlap-dedupe policy and provenance recording requirements.
      - heading: journald ingestion
        summary: OTel journald receiver usage and cursor persistence requirements.
    important_terms:
      - term: syslog_files
        note: Unix telemetry source declaration referenced in config.
      - term: journal_files
        note: Journald source declaration referenced in config.
      - term: overlap-dedupe mode
        note: Provenance expectation referenced by ADR-0002.
      - term: unix_syslog_fingerprint_v1
        note: Dedupe strategy token referenced in other docs.
      - term: provenance
        note: Recording duplication-avoidance configuration and decisions.
    evidence:
      - file: 044_unix_log_ingestion.md
        section_heading: Overview
        excerpt: Linux systems produce logs through multiple subsystems that often overlap. systemd-journald captures
  - id: spec_045_storage_formats
    filename: 045_storage_formats.md
    title: Storage formats
    purpose: Defines canonical storage formats for artifacts (JSON/JSONL/Parquet), including schema snapshotting and determinism requirements for long-term storage.
    key_sections:
      - heading: Storage tiers
        summary: Tier model (raw vs derived vs validated) for run artifacts.
      - heading: Format selection by artifact type
        summary: Canonical format choices (JSON/JSONL/Parquet) by artifact class.
      - heading: Parquet conventions
        summary: Dataset layout, schema snapshots, and ordering requirements for Parquet outputs.
    important_terms:
      - term: JSONL
        note: Line-delimited JSON used for event/result streams.
      - term: Parquet dataset
        note: Directory-based Parquet representation for normalized events.
      - term: _schema.json
        note: Required schema snapshot for Parquet datasets.
      - term: UTF-8 byte order
        note: Sorting rule used across outputs.
      - term: schema_version
        note: Logical schema version recorded for datasets.
    evidence:
      - file: 045_storage_formats.md
        section_heading: Storage tiers
        excerpt: 'Path notation (normative):'
  - id: spec_050_normalization_ocsf
    filename: 050_normalization_ocsf.md
    title: Normalization to OCSF
    purpose: Defines normalization to OCSF as the canonical event model, including validation tiers, coverage metrics, and mapping snapshot requirements.
    key_sections:
      - heading: Validation strategy
        summary: Tiered validation gates (Tier 0/1/2/3/R) and CI expectations.
      - heading: Observability and coverage
        summary: Mapping coverage metrics and regression detection.
      - heading: Key decisions
        summary: OCSF pinning and required normalization artifacts.
    important_terms:
      - term: OCSF
        note: Canonical normalized event model.
      - term: ocsf_event_envelope.schema.json
        note: Envelope contract referenced for validation.
      - term: normalized/mapping_coverage.json
        note: Coverage artifact used for gates and trends.
      - term: mapping_profile_sha256
        note: Hash tying metrics to a specific mapping profile.
      - term: Tier 1 coverage gate
        note: CI gate derived from field tiers and coverage.
    evidence:
      - file: 050_normalization_ocsf.md
        section_heading: Validation strategy
        excerpt: '- Tier 0 (CI gate): validate normalized events against the Purple Axiom envelope contract'
  - id: spec_055_ocsf_field_tiers
    filename: 055_ocsf_field_tiers.md
    title: 'OCSF field tiers: core vs extended'
    purpose: Defines OCSF field tiers used for validation/coverage gates, especially Tier 1 coverage metrics used by normalization and scoring.
    key_sections:
      - heading: Overview
        summary: Motivation for tiering and what is measured.
      - heading: Tier model
        summary: Definitions of Tier 0/1/2/3 expectations.
      - heading: Validation and coverage expectations
        summary: How tier coverage is computed, reported, and gated.
    important_terms:
      - term: Tier 0
        note: Envelope/schema validity gate.
      - term: Tier 1
        note: Core field coverage gate for CI/regression.
      - term: Tier 2
        note: Deeper class/source validation tier.
      - term: Tier 3
        note: Storage-focused tier (Parquet/schema constraints).
      - term: tier1_field_coverage
        note: Metric used as a gating signal (via scoring thresholds).
    evidence:
      - file: 055_ocsf_field_tiers.md
        section_heading: Overview
        excerpt: Purple Axiom tiers normalized event content to balance MVP feasibility with long-term fidelity. Tier
  - id: spec_060_detection_sigma
    filename: 060_detection_sigma.md
    title: Detection Rules (Sigma)
    purpose: Defines the detection stage's Sigma rule evaluation outputs, including detection instance schema requirements and attribution semantics.
    key_sections:
      - heading: Detection instance schema
        summary: Required and recommended fields for detection instances.
      - heading: Unattributed detections
        summary: Handling detections that cannot be attributed to ground truth.
      - heading: Rule provenance
        summary: What provenance should be recorded for rules and match context.
    important_terms:
      - term: detections/detections.jsonl
        note: Primary detections stream output.
      - term: detection_instance.schema.json
        note: Contract for detection instance validation.
      - term: matched_event_ids
        note: References to metadata.event_id values.
      - term: scenario_id
        note: Recommended field for detection instances when available.
      - term: extensions.bridge
        note: Bridge provenance embedded in detections.
    evidence:
      - file: 060_detection_sigma.md
        section_heading: Detection instance schema
        excerpt: Detection instances MUST validate against
  - id: spec_065_sigma_to_ocsf_bridge
    filename: 065_sigma_to_ocsf_bridge.md
    title: Sigma-to-OCSF bridge
    purpose: Defines the routing, aliasing, and backend adapter contract for executing Sigma over OCSF, including deterministic bridge artifacts.
    key_sections:
      - heading: Core concept
        summary: Router + alias map + backend adapter composition.
      - heading: Logsource router
        summary: Mapping Sigma logsource to OCSF class scopes and filters.
      - heading: Evaluator backend adapter
        summary: Deterministic compilation requirements (e.g., duckdb_sql).
    important_terms:
      - term: logsource router
        note: Routes Sigma logsource to OCSF class scopes.
      - term: field alias map
        note: Maps Sigma fields to OCSF field paths.
      - term: evaluator backend adapter
        note: Compiles and evaluates rules over normalized stores.
      - term: raw.* fallback
        note: Controlled fallback path with safety gates.
      - term: bridge_mapping_pack_invalid
        note: Fail-closed reason code for invalid mapping packs.
    evidence:
      - file: 065_sigma_to_ocsf_bridge.md
        section_heading: Core concept
        excerpt: 'The bridge is a composition of three artifacts:'
  - id: spec_070_scoring_metrics
    filename: 070_scoring_metrics.md
    title: Scoring and metrics
    purpose: Defines the scoring surface (coverage, latency, fidelity, and pipeline health), CI threshold semantics, and evidence pointer requirements by measurement layer.
    key_sections:
      - heading: Primary metrics (seed)
        summary: Metric families and initial gap taxonomy tokens.
      - heading: Thresholds (CI gates)
        summary: Threshold configuration and interpretation rules.
      - heading: Deterministic ordering
        summary: Deterministic ordering and comparison semantics for metrics.
    important_terms:
      - term: scoring/summary.json
        note: Authoritative scoring output used for thresholds.
      - term: detection_latency
        note: Metric definition (first_detection_time - ground_truth_time).
      - term: missing_telemetry
        note: Gap category token for missing expected signals.
      - term: normalization_gap
        note: Gap category token for missing required OCSF fields.
      - term: evidence pointers
        note: Required evidence pointer sets by measurement layer.
    evidence:
      - file: 070_scoring_metrics.md
        section_heading: Primary metrics (seed)
        excerpt: '- Coverage:'
  - id: spec_080_reporting
    filename: 080_reporting.md
    title: Reporting
    purpose: Defines reporting artifacts, exit-code semantics, and CI-facing status recommendations derived from contracted artifacts and scoring outputs.
    key_sections:
      - heading: Overview
        summary: Reporting responsibilities and artifact outputs.
      - heading: Required reporting outputs (v0.1)
        summary: Contracted report artifacts emitted for CI and operators.
      - heading: Regression analysis
        summary: Cross-run diffing surfaces and baseline comparisons.
    important_terms:
      - term: report/report.json
        note: Reportable run summary artifact.
      - term: report/thresholds.json
        note: Threshold evaluation and status recommendation.
      - term: status_recommendation
        note: CI-facing status computed by reporting stage.
      - term: regression baseline
        note: Baseline run comparison model.
      - term: exit code semantics
        note: Standardized exit behavior for CI integration.
    evidence:
      - file: 080_reporting.md
        section_heading: Overview
        excerpt: The reporting stage transforms scoring outputs into actionable artifacts. Reports serve three
  - id: spec_085_golden_datasets
    filename: 085_golden_datasets.md
    title: Golden dataset generation for ML training and evaluation
    purpose: Defines deterministic dataset exports derived from run bundles, with label-strippable views, reproducible splits, and release posture rules.
    key_sections:
      - heading: Purpose
        summary: Why and how “golden datasets” are built from runs.
      - heading: Dataset manifest
        summary: dataset_manifest.json schema, canonicalization, and hashing.
      - heading: Splits
        summary: Deterministic split assignment algorithm and outputs.
    important_terms:
      - term: dataset_manifest.json
        note: Root manifest describing dataset release contents.
      - term: dataset_release_id
        note: Deterministic release ID derived from hash basis.
      - term: dataset view
        note: Features/labels/provenance projections with includes/excludes.
      - term: release posture
        note: public|gated|internal posture policy for contents.
      - term: join keys
        note: Stable keys to re-attach labels to features.
    evidence:
      - file: 085_golden_datasets.md
        section_heading: Purpose
        excerpt: This document defines a deterministic, reproducible mechanism for generating "golden datasets" from
  - id: spec_086_detection_baseline_library
    filename: 086_detection_baseline_library.md
    title: Detection baseline library
    purpose: Defines Baseline Detection Packages (BDPs) and a baseline library under exports/baselines for detection regression and offline evaluation (v0.2+).
    key_sections:
      - heading: Overview
        summary: What BDPs are and why they exist.
      - heading: Storage location and addressing
        summary: exports/baselines layout, identifiers, and versioning.
      - heading: Baseline package manifest contract
        summary: baseline_package_manifest.json contract and required fields.
    important_terms:
      - term: Baseline Detection Package (BDP)
        note: Redaction-safe, lightweight subset of a single run bundle.
      - term: baseline_package_manifest.json
        note: Contract-backed manifest for BDPs.
      - term: exports/baselines/
        note: Reserved baseline library storage location.
      - term: security/checksums.txt
        note: Integrity enumeration required for BDPs.
      - term: profile detection_eval_v1
        note: BDP profile defined by the spec.
    evidence:
      - file: 086_detection_baseline_library.md
        section_heading: Overview
        excerpt: A **Baseline Detection Package (BDP)** is a redaction-safe, lightweight subset of a *single*
  - id: spec_090_security_safety
    filename: 090_security_safety.md
    title: Security and safety
    purpose: Defines safety and security constraints across pipeline stages, including cache provenance constraints, reconciliation safety requirements, and failure handling rules.
    key_sections:
      - heading: Safe defaults
        summary: Default-safe behavior expectations across stages (fail-closed posture).
      - heading: Secrets
        summary: Constraints to avoid accidental disclosure (credentials, tokens, private keys).
      - heading: Failure modes
        summary: Failure handling and classification for safety violations and misconfiguration.
    important_terms:
      - term: logs/cache_provenance.json
        note: Run-level cache provenance artifact and constraints.
      - term: security.redaction.enabled
        note: Redaction enablement signal referenced by rules.
      - term: deterministic placeholder
        note: Placeholder artifacts used when withholding content.
      - term: runner.state_reconciliation
        note: Outcome referenced for residue reporting.
      - term: unexpected network egress
        note: Safety violation that must fail the run.
    evidence:
      - file: 090_security_safety.md
        section_heading: Safe defaults
        excerpt: '- Runs SHOULD use isolated network ranges.'
  - id: spec_100_test_strategy_ci
    filename: 100_test_strategy_ci.md
    title: Test strategy and CI
    purpose: Defines the conformance and determinism test strategy required for CI, including fixtures and stable output comparisons.
    key_sections:
      - heading: Overview
        summary: Testing objectives for deterministic CI validation.
      - heading: Integration tests
        summary: End-to-end fixtures validating stage handoffs and contracted artifacts.
      - heading: CI gates
        summary: What must be asserted for contracts, determinism, and publish gates.
    important_terms:
      - term: conformance tests
        note: CI-suitable tests for deterministic outputs.
      - term: fixtures
        note: Fixed inputs used to assert stability.
      - term: determinism checks
        note: Byte-identical/ordering checks across runs/builds.
      - term: schema validation
        note: Contract validation for artifacts in CI.
      - term: regression tests
        note: Diffing comparable surfaces across baselines/candidates.
    evidence:
      - file: 100_test_strategy_ci.md
        section_heading: Overview
        excerpt: '**Summary**: Purple Axiom requires deterministic, reproducible pipeline outputs. This spec defines'
  - id: spec_105_ci_operational_readiness
    filename: 105_ci_operational_readiness.md
    title: CI and Operational Readiness
    purpose: Consolidates existing v0.1 gates, publish gates, health signals, and exit-code semantics into a single deterministic CI verdict model without introducing new artifacts.
    key_sections:
      - heading: Overview
        summary: CI verdict contract assembled from existing sources.
      - heading: Scope
        summary: What is and is not introduced by this consolidation.
      - heading: Definitions
        summary: Canonical CI terms (run status, gates, status recommendation).
    important_terms:
      - term: CI gate
        note: Pass/fail rule evaluated over contracted artifacts.
      - term: threshold gate
        note: Gate that may degrade status to partial.
      - term: manifest.status
        note: success|partial|failed derived from stage outcomes.
      - term: status recommendation
        note: CI-facing status computed by reporting stage.
      - term: evidence surfaces
        note: Mapping from gates to required artifacts/reports/health files.
    evidence:
      - file: 105_ci_operational_readiness.md
        section_heading: Overview
        excerpt: This document defines the normative CI pipeline contract for Purple Axiom v0.1 implementations by
  - id: spec_110_operability
    filename: 110_operability.md
    title: Operability
    purpose: Defines operational health signals, health files, counters, and safeguards to support deterministic observability and CI-friendly diagnosis.
    key_sections:
      - heading: Service health model
        summary: Operational health model and how health is represented.
      - heading: Health files (normative, v0.1)
        summary: health.json/counters.json and their roles as deterministic observability signals.
      - heading: Resource budgets
        summary: Operational constraints (budgets, limits) to reduce risk and drift.
    important_terms:
      - term: logs/health.json
        note: Health signal artifact referenced by scoring evidence rules.
      - term: logs/counters.json
        note: Deterministic counters for stage observability.
      - term: health files
        note: Standardized operability outputs.
      - term: safeguards
        note: Operational rules and defaults.
      - term: CI diagnosis
        note: Evidence surfaces for CI troubleshooting.
    evidence:
      - file: 110_operability.md
        section_heading: Service health model
        excerpt: Each major pipeline stage exposes a minimal health signal and MUST record a stage outcome in the run
  - id: spec_115_operator_interface
    filename: 115_operator_interface.md
    title: Operator Interface
    purpose: Defines a local-first web UI and Operator API for plan authoring, run management, status monitoring, and safe artifact/report viewing (v0.2+).
    key_sections:
      - heading: Version scope
        summary: v0.2+ normative scope for the Operator Interface.
      - heading: Goals
        summary: Required UI/API capabilities including baseline library management.
      - heading: Terms
        summary: Defines appliance, OI, reverse proxy, and verb.
    important_terms:
      - term: Operator API
        note: HTTP API used by the UI and future clients.
      - term: verb
        note: Stable orchestrator entry point (build/simulate/replay/export/destroy).
      - term: appliance
        note: Single-container packaging model for v0.2.
      - term: baseline library
        note: UI-managed BDP library for regression workflows.
      - term: otel_gateway
        note: OTLP gateway configuration and mTLS expectations.
    evidence:
      - file: 115_operator_interface.md
        section_heading: Version scope
        excerpt: This specification is **v0.2+ (normative)** unless explicitly marked as reserved or future work.
  - id: spec_120_config_reference
    filename: 120_config_reference.md
    title: Configuration reference
    purpose: Defines the operator-facing configuration surface, precedence rules, determinism requirements, and validation expectations across pipeline stages.
    key_sections:
      - heading: Configuration files and precedence
        summary: Ordered precedence for defaults, range.yaml, scenario.yaml, CLI, env.
      - heading: Workspace root and filesystem paths
        summary: Path resolution and workspace boundary rules.
      - heading: Top-level keys
        summary: Key namespaces (lab, telemetry, detection, scoring, reporting, etc.).
    important_terms:
      - term: inputs/range.yaml
        note: Primary config file used in examples.
      - term: inputs/scenario.yaml
        note: Optional scenario-specific overrides.
      - term: secrets rule
        note: Secrets are referenced, not embedded.
      - term: workspace boundary rules
        note: Writes must remain under workspace_root (with limited exceptions).
      - term: reserved workspace directories
        note: cache/, exports/, and other reserved roots.
    evidence:
      - file: 120_config_reference.md
        section_heading: Configuration files and precedence
        excerpt: 'Recommended sources (lowest to highest precedence):'
  - id: ref_contract_registry
    filename: contract_registry.json
    title: Contract registry
    purpose: Registry of contract schemas and run-relative artifact bindings used for artifact validation and publish-gate conformance.
    key_sections:
      - heading: contracts
        summary: Contract identifiers, schema paths, and contract versions.
      - heading: bindings
        summary: Run-relative artifact globs mapped to required contracts.
      - heading: notes
        summary: Additional registry notes used by tooling.
    important_terms:
      - term: registry_version
        note: Version string for the registry format/content.
      - term: contracts
        note: List of contract identifiers and schema pointers.
      - term: bindings
        note: Artifact-to-contract association list.
      - term: contract_id
        note: Stable identifier for a schema/contract.
      - term: artifact_glob
        note: Glob used to match run-bundle artifact paths.
    evidence:
      - file: contract_registry.json
        section_heading: registry_version
        excerpt: '"registry_version": "0.1.0",'
  - id: ref_coverage_matrix
    filename: coverage_matrix.md
    title: OCSF field mapping completeness matrix v0.1 MVP
    purpose: Defines the v0.1 mapping-profile conformance checklist for Tier 1 and Tier 2 fields (coverage matrix used for CI gating and regression tracking).
    key_sections:
      - heading: Scope
        summary: What this matrix covers for v0.1 and how it is intended to be used.
      - heading: Cell semantics (normative)
        summary: Normative interpretation of matrix cells and conformance meaning.
      - heading: CI conformance requirements for this matrix
        summary: How CI must validate and assert conformance against the matrix.
    important_terms:
      - term: Tier 1 matrix
        note: Core common field coverage expectations for v0.1.
      - term: Tier 2 matrices
        note: Class/source minimums for v0.1 (Tier 2A–2D subsets).
      - term: rationale codes
        note: Short tokens explaining why a mapping is missing or deferred.
      - term: cell semantics
        note: Meaning of 'Y', 'N', and rationale-coded cells.
      - term: conformance assertions
        note: CI assertions derived from the matrix.
    evidence:
      - file: coverage_matrix.md
        section_heading: Scope
        excerpt: 'In scope `source_type` rows (v0.1 MVP):'
  - id: ref_supported_versions
    filename: SUPPORTED_VERSIONS.md
    title: Supported versions
    purpose: Pinned external dependency versions tested and supported for Purple Axiom v0.1 (runtime, CI toolchain, and drift policy).
    key_sections:
      - heading: Runtime version pins (normative)
        summary: Stage/runtime dependency pins required for reproducible builds and runs.
      - heading: Toolchain and CI pins (normative for CI and guidance for local)
        summary: CI-enforced pins for Python and key tools used to produce/baseline fixtures.
      - heading: Version drift policy (normative)
        summary: Fail-closed behavior and update process when versions drift.
    important_terms:
      - term: pinned versions
        note: Top-level dependency versions that MUST match in CI and supported runs.
      - term: uv.lock
        note: Lockfile pinning transitive dependencies (not enumerated in this doc).
      - term: CI fail closed
        note: Policy that CI MUST fail if enabled-stage versions differ from pins.
      - term: toolchain baseline
        note: Pinned versions for Python/uv and test/lint tooling used in CI.
      - term: OCSF schema pin
        note: Pinned OCSF schema version used by normalization and coverage fixtures.
    evidence:
      - file: SUPPORTED_VERSIONS.md
        section_heading: Runtime version pins (normative)
        excerpt: For v0.1 builds and CI runs, the implementation MUST use the pinned versions below, unless a spec
  - id: adr_0001_project_naming_and_versioning
    filename: ADR-0001-project-naming-and-versioning.md
    title: ADR-0001 Project naming and versioning
    purpose: Establishes stable naming/versioning domains and pinning rules (IDs, SemVer domains, pack-like artifacts, schema/contract versions) to ensure reproducibility and comparability.
    key_sections:
      - heading: Context
        summary: Why stable identifiers and explicit pins are needed.
      - heading: Decision
        summary: Normative conventions for IDs, versions, and pinning.
      - heading: Canonical identifier formats
        summary: id_slug_v1 and semver_v1 requirements.
    important_terms:
      - term: project_version
        note: SemVer identifying the Purple Axiom release.
      - term: run_id
        note: UUID identifier for a run.
      - term: scenario_id
        note: Stable scenario identity.
      - term: pack-like artifacts
        note: Criteria packs, rule sets, mapping packs, threat intel packs.
      - term: id_slug_v1
        note: Canonical ID format for *_id fields.
    evidence:
      - file: ADR-0001-project-naming-and-versioning.md
        section_heading: Context
        excerpt: Purple Axiom needs stable identifiers and explicit version pins for scenarios, rules, mappings, and
  - id: adr_0002_event_identity_and_provenance
    filename: ADR-0002-event-identity-and-provenance.md
    title: 'ADR-0002: Event identity and provenance'
    purpose: Defines deterministic event identity (metadata.event_id) and provenance rules, including identity basis by source type and handling conflicting identities.
    key_sections:
      - heading: Decision
        summary: Normative event identity and provenance requirements.
      - heading: Identity basis (v1)
        summary: Source-specific identity basis strategies and tiering.
      - heading: Consequences
        summary: Required producer behaviors and consumer expectations.
    important_terms:
      - term: metadata.event_id
        note: Canonical per-event identity in normalized outputs.
      - term: metadata.uid
        note: Internal uniqueness token distinct from event_id.
      - term: identity_basis
        note: Declared basis used to compute event identity.
      - term: provenance
        note: Recorded metadata enabling traceability and audits.
      - term: overlap-dedupe mode
        note: Unix dedupe/provenance requirement referenced by ADR.
    evidence:
      - file: ADR-0002-event-identity-and-provenance.md
        section_heading: Decision
        excerpt: 'Define two identifiers:'
  - id: adr_0003_redaction_policy
    filename: ADR-0003-redaction-policy.md
    title: 'ADR-0003: Redaction policy'
    purpose: Defines the redaction policy model, redaction-safe posture, and handling of withheld/quarantined artifacts in exports and sharing.
    key_sections:
      - heading: Context
        summary: Why redaction policy is required for safe sharing.
      - heading: Decision
        summary: Policy rules and required snapshots/handling.
      - heading: Consequences
        summary: Expected behavior across stages and exports.
    important_terms:
      - term: redaction policy
        note: Rules governing what may be exported/shared.
      - term: redaction-safe
        note: Posture permitting broad distribution.
      - term: quarantined
        note: Content disallowed in public posture.
      - term: placeholder artifacts
        note: Deterministic placeholders for withheld content.
      - term: policy snapshot
        note: Snapshot artifact pinned for auditability.
    evidence:
      - file: ADR-0003-redaction-policy.md
        section_heading: Context
        excerpt: Purple Axiom artifacts intentionally preserve high-fidelity telemetry and runner evidence for
  - id: adr_0004_deployment_architecture_and_inter_component_communication
    filename: ADR-0004-deployment-architecture-and-inter-component-communication.md
    title: 'ADR-0004: Deployment architecture and inter-component communication'
    purpose: Defines the deployment model and filesystem-mediated inter-component communication (staging + atomic publish, locks, and no RPC between stages).
    key_sections:
      - heading: Context
        summary: Constraints for local-first, deterministic coordination.
      - heading: Decision
        summary: Run lock, staging, and publish semantics.
      - heading: Canonical run sequence (v0.1)
        summary: Stage ordering and required pinned inputs/snapshots.
    important_terms:
      - term: runs/.locks/<run_id>.lock
        note: Lock file used to prevent concurrent writers.
      - term: .staging
        note: Staging area for publish-gated writes.
      - term: atomic rename
        note: Publish mechanism into final artifact paths.
      - term: one-shot orchestrator
        note: Process model for stage execution coordination.
      - term: file-based coordination
        note: No cross-stage RPC; filesystem is coordination plane.
    evidence:
      - file: ADR-0004-deployment-architecture-and-inter-component-communication.md
        section_heading: Context
        excerpt: Purple Axiom v0.1 specifies a staged pipeline (lab provider, runner, telemetry, normalization,
  - id: adr_0005_stage_outcomes_and_failure_classification
    filename: ADR-0005-stage-outcomes-and-failure-classification.md
    title: 'ADR-0005: Stage outcomes and failure classification'
    purpose: Defines how stages emit outcomes (status/fail_mode/reason_code), and how manifest.status is derived for reportability and CI interpretation.
    key_sections:
      - heading: Decision
        summary: Normative stage outcome model and required fields.
      - heading: Manifest status derivation (normative)
        summary: Rules for deriving manifest.status from recorded outcomes.
      - heading: Failure taxonomy (normative reason codes)
        summary: Canonical reason-code sets for consistent failure classification.
    important_terms:
      - term: stage outcome
        note: Stage-level outcome record emitted for each stage/substage.
      - term: fail_mode
        note: fail_closed vs warn_and_skip semantics.
      - term: reason_code
        note: Canonical reason for outcome classification.
      - term: manifest.status
        note: success|partial|failed derived from stage outcomes.
      - term: substage
        note: Dotted substage naming convention.
    evidence:
      - file: ADR-0005-stage-outcomes-and-failure-classification.md
        section_heading: Decision
        excerpt: 1. **Every enabled stage MUST produce a deterministic stage outcome** (or a deterministic fatal exit
  - id: adr_0006_plan_execution_model_and_target_cardinality
    filename: ADR-0006-plan-execution-model.md
    title: 'ADR-0006: Plan execution model and target cardinality'
    purpose: Records the decision on plan execution semantics and how steps target one or more assets, aligning with the plan execution spec.
    key_sections:
      - heading: Context
        summary: Motivations for plan/step modeling and target cardinality.
      - heading: Decision
        summary: Normative semantics for plan execution.
      - heading: Consequences
        summary: Impacts to pipeline orchestration and artifacts.
    important_terms:
      - term: plan
        note: Executable plan unit for a stage.
      - term: step
        note: Node within a plan.
      - term: target cardinality
        note: Single vs multi-target semantics.
      - term: deterministic execution
        note: Deterministic ordering expectations.
      - term: plan preview
        note: Used by operator-facing tooling (v0.2+).
    evidence:
      - file: ADR-0006-plan-execution-model.md
        section_heading: Context
        excerpt: 'Purple Axiom v0.1 enforces a strict 1:1 relationship between an action and a target asset:'
  - id: adr_0007_state_machines_for_lifecycle_semantics
    filename: ADR-0007-state-machines.md
    title: ADR-0007 State machines for lifecycle semantics
    purpose: Defines guidance for lifecycle state machines (normative vs representational), shaping how run/stage lifecycle semantics are modeled and validated.
    key_sections:
      - heading: Context
        summary: Why state machine clarity matters for CI and lifecycle semantics.
      - heading: Decision
        summary: Normative guidance for state machine specification.
      - heading: Consequences
        summary: Expectations for lifecycle modeling across components.
    important_terms:
      - term: state machine
        note: Lifecycle model for runs/stages/components.
      - term: normative state machine
        note: Defines allowed transitions as a contract.
      - term: representational state machine
        note: Describes observed state without constraining it.
      - term: lifecycle semantics
        note: Shared meanings for states and transitions.
      - term: determinism
        note: State reporting and transitions must be deterministic.
    evidence:
      - file: ADR-0007-state-machines.md
        section_heading: Context
        excerpt: Purple Axiom is specified as a stage-scoped pipeline where each stage reads inputs from the run
  - id: adr_0008_threat_intelligence_integration_model
    filename: ADR-0008-Threat-intelligence-integration-model.md
    title: ADR-0008 Threat intelligence integration model
    purpose: Defines how threat intelligence packs are selected, pinned, and integrated into runs for enrichment and provenance, including pack identifiers and inputs paths.
    key_sections:
      - heading: Context
        summary: Motivations for TI enrichment and comparability.
      - heading: Decision
        summary: Pack model, pins, and required artifacts.
      - heading: Consequences
        summary: Implications for normalization/scoring/reporting consumers.
    important_terms:
      - term: threat_intel_pack_id
        note: Pack-like artifact identifier (ADR-0001 domain).
      - term: threat_intel_pack_version
        note: SemVer version pin for the pack.
      - term: inputs/threat_intel/
        note: Reserved input location for pinned TI content.
      - term: indicators.jsonl
        note: Example TI content type referenced by ADR.
      - term: provenance pins
        note: Required pins for reproducibility.
    evidence:
      - file: ADR-0008-Threat-intelligence-integration-model.md
        section_heading: Context
        excerpt: Operators often want to incorporate threat intelligence (TI) into evaluation and reporting
  - id: adr_0009_run_export_policy_and_log_classification
    filename: ADR-0009-run-export-policy-and-log-classification.md
    title: 'ADR-0009: Run export policy and log classification'
    purpose: Defines export policy (what is included/excluded), classifies logs (deterministic evidence vs volatile diagnostics), and specifies integrity/signing behavior for exports.
    key_sections:
      - heading: Context
        summary: Why export policy and log classification are needed.
      - heading: Decision
        summary: Export scopes, exclusions, and signing requirements.
      - heading: Consequences
        summary: Constraints on operator tooling and sharing workflows.
    important_terms:
      - term: deterministic evidence
        note: Log/artifact class that should be exported/checksummed.
      - term: volatile diagnostics
        note: Log/artifact class excluded by default exports.
      - term: security/checksums.txt
        note: Required integrity enumeration file.
      - term: signature.ed25519
        note: Optional signature over checksums bytes.
      - term: export_manifest.json
        note: Export output referenced by operator tooling (v0.2+).
    evidence:
      - file: ADR-0009-run-export-policy-and-log-classification.md
        section_heading: Context
        excerpt: 'Multiple v0.1 specifications currently mix two different interpretations of `runs/<run_id>/logs/`:'
  - id: proj_viz_readme
    filename: project_viz/readme.md
    title: Project Viz (README)
    purpose: Explains how Project Viz maps specs into an evidence-backed system model and generates consistent Mermaid diagrams.
    key_sections:
      - heading: What lives here
        summary: Primary inputs (system_model.yaml, Mermaid.py) and generated diagram outputs.
      - heading: System model format
        summary: Expected YAML keys/shapes for trust zones, entities, relationships, workflows, and states.
      - heading: Evidence pointers
        summary: Evidence pointer schema and the “evidence or it doesn't exist” rule.
    important_terms:
      - term: architecture/system_model.yaml
        note: Primary YAML model input for diagram generation.
      - term: source/Mermaid.py
        note: Generator script that validates and renders Mermaid markdown.
      - term: Mermaid-safe IDs
        note: ID regex enforced for Mermaid emission.
      - term: --workflow
        note: CLI flag selecting which workflow to render for stage/run sequence views.
      - term: --strict
        note: Treat validation warnings as failures (CI-friendly).
    evidence:
      - file: project_viz/readme.md
        section_heading: What lives here
        excerpt: YAML system model used to generate Mermaid diagrams.
  - id: proj_viz_system_model
    filename: project_viz/architecture/system_model.yaml
    title: System model (Project Viz)
    purpose: Canonical, evidence-backed architecture model consumed by Mermaid.py to render diagram views.
    key_sections:
      - heading: system
        summary: System identity, description, and top-level evidence pointers.
      - heading: trust_zones and entities
        summary: Trust zones and entity inventory (actors/containers/datastores/externals/buses).
      - heading: relationships and workflows
        summary: Directed edges and ordered workflow steps used for diagram generation.
    important_terms:
      - term: trust_zones
        note: Trust boundary clustering basis for diagrams.
      - term: entities
        note: Inventory of actors/containers/datastores/externals/buses referenced by edges.
      - term: relationships
        note: Labeled directed edges between entities.
      - term: workflows[].steps[].n
        note: Step ordering key used for deterministic sequencing.
      - term: evidence
        note: Evidence pointers attached to model elements.
    evidence:
      - file: project_viz/architecture/system_model.yaml
        section_heading: system
        excerpt: 'id: purple_ci_orchestrator'
  - id: proj_viz_arch_00_system
    filename: project_viz/architecture/00_system.yaml
    title: System fragment (Project Viz)
    purpose: Defines the system identity/description section of the Project Viz architecture model, including evidence pointers.
    key_sections:
      - heading: system
        summary: System id/name/description and stage list references.
      - heading: evidence
        summary: Spec/ADR evidence pointers justifying system-level claims.
    important_terms:
      - term: purple_ci_orchestrator
        note: Stable system identifier used by the model.
      - term: stages
        note: High-level stage inventory referenced across workflows/relationships.
      - term: evidence pointers
        note: '{file, section_heading, excerpt} triplets backing model assertions.'
    evidence:
      - file: project_viz/architecture/00_system.yaml
        section_heading: system
        excerpt: 'id: purple_ci_orchestrator'
  - id: proj_viz_arch_10_trust_zones
    filename: project_viz/architecture/10_trust_zones.yaml
    title: Trust zones fragment (Project Viz)
    purpose: Defines the trust-zone inventory used to cluster entities and relationships in trust-boundary diagrams.
    key_sections:
      - heading: trust_zones
        summary: Trust zone definitions (id/name/description) with evidence pointers.
    important_terms:
      - term: developer_workstation
        note: Operator endpoint trust zone (where CLI/UI runs).
      - term: ci_environment
        note: CI execution trust zone.
      - term: lab_range
        note: Lab/range trust zone for provisioned assets.
      - term: local_filesystem
        note: Workspace/run-bundle storage trust zone.
      - term: evidence
        note: Evidence pointers justifying trust-zone definitions.
    evidence:
      - file: project_viz/architecture/10_trust_zones.yaml
        section_heading: trust_zones
        excerpt: 'id: developer_workstation'
  - id: proj_viz_arch_20_entities
    filename: project_viz/architecture/20_entities.yaml
    title: Entities fragment (Project Viz)
    purpose: Defines the entity inventory (actors/containers/datastores/externals/buses) referenced by relationships and workflows.
    key_sections:
      - heading: actors
        summary: Human and system actors that invoke or observe runs.
      - heading: containers
        summary: Pipeline components (stages and tools) that produce/consume artifacts.
      - heading: datastores and buses
        summary: Storage locations and queues/buses used as boundaries in diagrams.
    important_terms:
      - term: actors
        note: Modeled initiators/observers of orchestrator workflows.
      - term: containers
        note: Modeled components (including pipeline stages) in the workflow.
      - term: datastores
        note: Storage boundaries (e.g., run bundles, caches, exports).
      - term: externals
        note: External systems/providers integrated via adapters.
      - term: buses
        note: Message/event buses used as logical boundaries.
    evidence:
      - file: project_viz/architecture/20_entities.yaml
        section_heading: containers
        excerpt: 'id: orchestrator_cli'
  - id: proj_viz_arch_30_relationships
    filename: project_viz/architecture/30_relationships.yaml
    title: Relationships fragment (Project Viz)
    purpose: Defines labeled, directed relationships between modeled entities (including evidence pointers per edge).
    key_sections:
      - heading: relationships
        summary: from/to edges with labels, messages, and optional data annotations.
    important_terms:
      - term: from
        note: Source entity id for a directed relationship.
      - term: to
        note: Destination entity id for a directed relationship.
      - term: label
        note: Relationship type used by diagram views (e.g., "invoke stage").
      - term: message
        note: Human-readable edge label emitted in Mermaid.
      - term: evidence
        note: Evidence pointers justifying the relationship.
    evidence:
      - file: project_viz/architecture/30_relationships.yaml
        section_heading: relationships
        excerpt: 'label: invoke stage'
  - id: proj_viz_arch_90_notes
    filename: project_viz/architecture/90_notes.yaml
    title: Notes and constraints (Project Viz)
    purpose: Captures model-maintenance requirements, constraints, open questions, and security findings for Project Viz.
    key_sections:
      - heading: requirements
        summary: Normative requirements for model content and diagram generation.
      - heading: constraints
        summary: Scope/assumption constraints (including “do not infer” rules).
      - heading: notes
        summary: Open questions and other maintenance notes.
    important_terms:
      - term: no_inferred_integrations
        note: Constraint forbidding inferred components/relationships without explicit evidence.
      - term: evidence pointers
        note: Required for any modeled element.
      - term: open_questions
        note: Items to resolve before adding missing/ambiguous elements.
      - term: security_findings
        note: Redaction/safety-related notes discovered during modeling.
      - term: deterministic IDs
        note: Stable snake_case identifiers for all elements.
    evidence:
      - file: project_viz/architecture/90_notes.yaml
        section_heading: constraints
        excerpt: 'id: no_inferred_integrations'
  - id: proj_viz_arch_glossary
    filename: project_viz/architecture/glossary.yaml
    title: Glossary (Project Viz)
    purpose: Canonical vocabulary (terms, categories, definitions, aliases) used to keep naming consistent across specs and the model.
    key_sections:
      - heading: terms
        summary: Glossary entries with optional aliases and evidence pointers.
    important_terms:
      - term: terms[]
        note: List of glossary entries.
      - term: term
        note: Human-readable glossary term label.
      - term: id
        note: Stable snake_case identifier for the glossary entry.
      - term: aliases
        note: Synonym list to prevent naming drift.
      - term: evidence
        note: Evidence pointer(s) backing the definition.
    evidence:
      - file: project_viz/architecture/glossary.yaml
        section_heading: terms
        excerpt: produces deterministic run bundles
  - id: proj_viz_contract_registry
    filename: project_viz/architecture/contract_registry.json
    title: Contract registry (Project Viz)
    purpose: Registry of contract schemas and run-relative artifact bindings used for artifact validation.
    key_sections:
      - heading: contracts
        summary: Contract identifiers and schema path metadata.
      - heading: bindings
        summary: Run-relative artifact globs mapped to required contracts.
      - heading: notes
        summary: Additional registry notes used by tooling.
    important_terms:
      - term: registry_version
        note: Version string for the registry format/content.
      - term: contracts
        note: List of contract identifiers and schema pointers.
      - term: bindings
        note: Artifact-to-contract association list.
      - term: contract_id
        note: Stable identifier for a schema/contract.
      - term: artifact_glob
        note: Glob used to match run-bundle artifact paths.
    evidence:
      - file: contract_registry.json
        section_heading: unknown
        excerpt: '{'
  - id: proj_viz_workflow_provisioning
    filename: project_viz/architecture/workflows/provisioning.yaml
    title: 'Workflow: provisioning'
    purpose: Defines the provisioning workflow steps and evidence pointers used in Project Viz diagrams.
    key_sections:
      - heading: workflows
        summary: Workflow metadata (id/name/scope) and ordered steps.
      - heading: steps
        summary: Deterministic step ordering via steps[].n and from/to/message.
      - heading: evidence
        summary: Evidence pointers per workflow and per step.
    important_terms:
      - term: provisioning
        note: Workflow id.
      - term: lab_provider
        note: Provider interface used to resolve/provision lab assets.
      - term: steps[].n
        note: Explicit step ordering key.
      - term: from/to
        note: Endpoint ids for each step edge.
      - term: message
        note: Step label emitted in run-sequence diagrams.
    evidence:
      - file: project_viz/architecture/workflows/provisioning.yaml
        section_heading: workflows
        excerpt: 'id: provisioning'
  - id: proj_viz_workflow_exercise_run
    filename: project_viz/architecture/workflows/exercise_run.yaml
    title: 'Workflow: exercise_run'
    purpose: Defines the end-to-end exercise-run workflow used for stage flow and run-sequence diagrams.
    key_sections:
      - heading: workflows
        summary: Workflow metadata (id/name/scope) and ordered steps.
      - heading: steps
        summary: Orchestrator and stage execution sequence for an end-to-end run.
      - heading: evidence
        summary: Evidence pointers per step back to specs/ADRs.
    important_terms:
      - term: exercise_run
        note: Workflow id for the end-to-end run.
      - term: simulate
        note: Orchestrator verb referenced in step messages.
      - term: publish gate
        note: Staging + validate + atomic publish pattern referenced in steps.
      - term: run bundle
        note: Filesystem artifact boundary across stages.
      - term: steps[].n
        note: Explicit step ordering key.
    evidence:
      - file: project_viz/architecture/workflows/exercise_run.yaml
        section_heading: workflows
        excerpt: 'id: exercise_run'
  - id: proj_viz_workflow_scoring_reporting
    filename: project_viz/architecture/workflows/scoring_reporting.yaml
    title: 'Workflow: scoring_reporting'
    purpose: Defines the analysis workflow from telemetry ingest through scoring and reporting.
    key_sections:
      - heading: workflows
        summary: Workflow metadata (id/name/scope) and ordered steps.
      - heading: steps
        summary: Telemetry ingestion, normalization, detection, scoring, and reporting sequence.
      - heading: evidence
        summary: Evidence pointers per step back to specs/ADRs.
    important_terms:
      - term: scoring_reporting
        note: Workflow id for analysis stages.
      - term: telemetry
        note: Telemetry ingest stage referenced by steps.
      - term: normalization
        note: Normalization stage referenced by steps.
      - term: scoring
        note: Scoring stage referenced by steps.
      - term: reporting
        note: Reporting stage referenced by steps.
    evidence:
      - file: project_viz/architecture/workflows/scoring_reporting.yaml
        section_heading: workflows
        excerpt: 'id: scoring_reporting'
  - id: proj_viz_workflow_publish_gate
    filename: project_viz/architecture/workflows/publish_gate.yaml
    title: 'Workflow: publish_gate'
    purpose: Defines the publish-gate pattern (staging + validation + atomic publish) as an explicit control-plane workflow.
    key_sections:
      - heading: workflows
        summary: Workflow metadata (id/name/scope) and ordered steps.
      - heading: steps
        summary: Stage writes to .staging then atomically publishes after validation.
      - heading: evidence
        summary: Evidence pointers backing publish-gate semantics.
    important_terms:
      - term: .staging
        note: Staging location for publish-gated writes.
      - term: validation
        note: Contract validation step prior to publish.
      - term: atomic rename
        note: Publish mechanism into final artifact paths.
      - term: publish gate
        note: Pattern used across stages for atomic artifact publication.
      - term: steps[].n
        note: Explicit step ordering key.
    evidence:
      - file: project_viz/architecture/workflows/publish_gate.yaml
        section_heading: workflows
        excerpt: 'id: publish_gate'
  - id: proj_viz_workflow_run_replay
    filename: project_viz/architecture/workflows/run_replay.yaml
    title: 'Workflow: run_replay'
    purpose: Defines the replay workflow for re-running downstream stages from an existing run bundle.
    key_sections:
      - heading: workflows
        summary: Workflow metadata (id/name/scope) and ordered steps.
      - heading: steps
        summary: Replay stage selection and deterministic reprocessing sequence.
      - heading: evidence
        summary: Evidence pointers per step back to specs/ADRs.
    important_terms:
      - term: run_replay
        note: Workflow id.
      - term: replay
        note: Orchestrator verb referenced in step messages.
      - term: analysis-only
        note: Replay scope indicated by the workflow name/steps.
      - term: deterministic
        note: Replay step messages call out determinism requirements.
      - term: steps[].n
        note: Explicit step ordering key.
    evidence:
      - file: project_viz/architecture/workflows/run_replay.yaml
        section_heading: workflows
        excerpt: 'id: run_replay'
  - id: proj_viz_workflow_run_export
    filename: project_viz/architecture/workflows/run_export.yaml
    title: 'Workflow: run_export'
    purpose: Defines the export workflow for packaging a run bundle for sharing.
    key_sections:
      - heading: workflows
        summary: Workflow metadata (id/name/scope) and ordered steps.
      - heading: steps
        summary: Export invocation and redaction step sequence.
      - heading: evidence
        summary: Evidence pointers backing export behavior.
    important_terms:
      - term: run_export
        note: Workflow id.
      - term: export
        note: Orchestrator verb referenced in step messages.
      - term: redaction-safe
        note: Export packaging posture referenced by steps.
      - term: redact
        note: Redaction action referenced by step messages.
      - term: steps[].n
        note: Explicit step ordering key.
    evidence:
      - file: project_viz/architecture/workflows/run_export.yaml
        section_heading: workflows
        excerpt: 'id: run_export'
  - id: proj_viz_workflow_range_destroy
    filename: project_viz/architecture/workflows/range_destroy.yaml
    title: 'Workflow: range_destroy'
    purpose: Defines the destroy workflow for tearing down provisioned lab/range resources.
    key_sections:
      - heading: workflows
        summary: Workflow metadata (id/name/scope) and ordered steps.
      - heading: steps
        summary: Destroy invocation and teardown boundary.
      - heading: evidence
        summary: Evidence pointers backing destroy semantics.
    important_terms:
      - term: range_destroy
        note: Workflow id.
      - term: destroy
        note: Orchestrator verb referenced in step messages.
      - term: lab_provider
        note: Provider invoked to destroy range resources.
      - term: lab_range
        note: Trust zone referenced by related model elements.
      - term: steps[].n
        note: Explicit step ordering key.
    evidence:
      - file: project_viz/architecture/workflows/range_destroy.yaml
        section_heading: workflows
        excerpt: 'id: range_destroy'
  - id: proj_viz_workflow_teardown
    filename: project_viz/architecture/workflows/teardown.yaml
    title: 'Workflow: teardown'
    purpose: Defines runner teardown/cleanup evidence steps, including cleanup invocation and verification boundaries.
    key_sections:
      - heading: workflows
        summary: Workflow metadata (id/name/scope) and ordered steps.
      - heading: steps
        summary: Runner cleanup/verification sequence and outcome recording.
      - heading: evidence
        summary: Evidence pointers per step back to integration and safety specs.
    important_terms:
      - term: teardown
        note: Workflow id.
      - term: cleanup verification
        note: Verification step to evidence cleanup checks.
      - term: state reconciliation
        note: Residue reporting step referenced by the workflow.
      - term: publish gate
        note: Staging/publish semantics used for teardown evidence artifacts.
      - term: steps[].n
        note: Explicit step ordering key.
    evidence:
      - file: project_viz/architecture/workflows/teardown.yaml
        section_heading: workflows
        excerpt: 'id: teardown'
  - id: tool_mermaid_diagram_generator
    filename: project_viz/source/Mermaid.py
    title: Mermaid diagram generator
    purpose: Script that renders Mermaid diagrams from system_model.yaml into docs/diagrams/generated/.
    key_sections:
      - heading: Inputs
        summary: Reads system_model.yaml and emits multiple diagram views.
      - heading: Outputs
        summary: Writes stage_flow.md, trust_boundaries.md, run_sequence.md, and run_status_state.md.
      - heading: Validation behavior
        summary: Validates model IDs, edge endpoints, and evidence pointers (optionally strict).
    important_terms:
      - term: docs/diagrams/generated/
        note: Output directory for generated diagram markdown.
      - term: stage_flow.md
        note: High-level pipeline stage flow diagram view.
      - term: trust_boundaries.md
        note: Trust zone boundaries diagram view.
      - term: run_sequence.md
        note: Canonical run sequence diagram view.
      - term: run_status_state.md
        note: Run lifecycle state machine diagram view.
    evidence:
      - file: project_viz/source/Mermaid.py
        section_heading: Docstring
        excerpt: Generate Mermaid diagrams from system_model.yaml.
